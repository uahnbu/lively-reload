"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.closeServer = exports.startServer = exports.webSocket = exports.modifyHTML = void 0;
const http_1 = require("http");
const express = require("express");
const serverHandler_1 = require("./utils/serverHandler");
const websocket_1 = require("./utils/websocket");
const app = express();
const server = http_1.createServer(app);
const sockets = new Set();
const webSocket = new websocket_1.default();
exports.webSocket = webSocket;
server.on('connection', socket => (sockets.add(socket), socket.once('close', () => sockets.delete(socket))));
server.on('upgrade', (...args) => webSocket.serverUpgrade(...args));
var modifyHTML_1 = require("./utils/modifyHTML");
Object.defineProperty(exports, "modifyHTML", { enumerable: true, get: function () { return modifyHTML_1.default; } });
const serverEvents = new serverHandler_1.default(app, server, sockets);
const startServer = () => serverEvents.startServer();
exports.startServer = startServer;
const closeServer = () => serverEvents.closeServer();
exports.closeServer = closeServer;
//# sourceMappingURL=index.js.map